# ğŸš€ Cabinet Backend CI/CD êµ¬ì¶• ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2026-01-03  
**ì‘ì„±ì**: DevOps Team  
**ë²„ì „**: 1.0

---

## ğŸ“‹ ëª©ì°¨

1. [Executive Summary](#executive-summary)
2. [CI/CD ì „ëµ ì„ íƒ ë°°ê²½](#cicd-ì „ëµ-ì„ íƒ-ë°°ê²½)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [Blue-Green ë°°í¬ ì›ë¦¬](#blue-green-ë°°í¬-ì›ë¦¬)
5. [êµ¬í˜„ ìƒì„¸](#êµ¬í˜„-ìƒì„¸)
6. [ì‚¬ìš© ê°€ì´ë“œ](#ì‚¬ìš©-ê°€ì´ë“œ)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
8. [ì°¸ê³  ìë£Œ](#ì°¸ê³ -ìë£Œ)

---

## ğŸ“Œ Executive Summary

Cabinet ë°±ì—”ë“œ ì‹œìŠ¤í…œì— **GitHub Actions + Docker Compose Blue-Green ë°°í¬**ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ì„±ê³¼
| í•­ëª© | ê²°ê³¼ |
|------|------|
| **ë‹¤ìš´íƒ€ì„** | 0ì´ˆ (ë¬´ì¤‘ë‹¨ ë°°í¬) |
| **ë°°í¬ ì‹œê°„** | ì•½ 5ë¶„ |
| **ë¡¤ë°± ì‹œê°„** | 30ì´ˆ ì´ë‚´ |
| **ë¹„ìš©** | $0 (ì™„ì „ ë¬´ë£Œ) |
| **ë³µì¡ë„** | â­â­ (ë‚®ìŒ) |

---

## ğŸ¯ CI/CD ì „ëµ ì„ íƒ ë°°ê²½

### ìš°ë¦¬ í”„ë¡œì íŠ¸ì˜ í™˜ê²½

```
ì„œë²„ êµ¬ì„±: ë‹¨ì¼ ê³ ì„±ëŠ¥ ì„œë²„
ì‚¬ìš©ì ìˆ˜: ìµœëŒ€ 1,000ëª…
ê¸°ìˆ  ìŠ¤íƒ: Docker Compose, Nginx, Spring Boot
ìš”êµ¬ì‚¬í•­: ë¬´ì¤‘ë‹¨ ë°°í¬ í•„ìˆ˜
```

### ê³ ë ¤í–ˆë˜ CI/CD ì˜µì…˜

<function_calls>
<invoke name="write">
<parameter name="contents"># ğŸš€ Cabinet Backend CI/CD êµ¬ì¶• ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2026-01-03  
**ì‘ì„±ì**: DevOps Team  
**ë²„ì „**: 1.0

---

## ğŸ“‹ ëª©ì°¨

1. [Executive Summary](#executive-summary)
2. [CI/CD ì „ëµ ì„ íƒ ë°°ê²½](#cicd-ì „ëµ-ì„ íƒ-ë°°ê²½)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [Blue-Green ë°°í¬ ì›ë¦¬](#blue-green-ë°°í¬-ì›ë¦¬)
5. [êµ¬í˜„ ìƒì„¸](#êµ¬í˜„-ìƒì„¸)
6. [ì‚¬ìš© ê°€ì´ë“œ](#ì‚¬ìš©-ê°€ì´ë“œ)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
8. [ì°¸ê³  ìë£Œ](#ì°¸ê³ -ìë£Œ)

---

## ğŸ“Œ Executive Summary

Cabinet ë°±ì—”ë“œ ì‹œìŠ¤í…œì— **GitHub Actions + Docker Compose Blue-Green ë°°í¬**ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ì„±ê³¼
| í•­ëª© | ê²°ê³¼ |
|------|------|
| **ë‹¤ìš´íƒ€ì„** | 0ì´ˆ (ë¬´ì¤‘ë‹¨ ë°°í¬) |
| **ë°°í¬ ì‹œê°„** | ì•½ 5ë¶„ |
| **ë¡¤ë°± ì‹œê°„** | 30ì´ˆ ì´ë‚´ |
| **ë¹„ìš©** | $0 (ì™„ì „ ë¬´ë£Œ) |
| **ë³µì¡ë„** | â­â­ (ë‚®ìŒ) |

---

## ğŸ¯ CI/CD ì „ëµ ì„ íƒ ë°°ê²½

### ìš°ë¦¬ í”„ë¡œì íŠ¸ì˜ í™˜ê²½

```
ì„œë²„ êµ¬ì„±: ë‹¨ì¼ ê³ ì„±ëŠ¥ ì„œë²„
ì‚¬ìš©ì ìˆ˜: ìµœëŒ€ 1,000ëª…
ê¸°ìˆ  ìŠ¤íƒ: Docker Compose, Nginx, Spring Boot
ìš”êµ¬ì‚¬í•­: ë¬´ì¤‘ë‹¨ ë°°í¬ í•„ìˆ˜
íŒ€ ê·œëª¨: ì†Œê·œëª¨ ê°œë°œíŒ€
```

### ê³ ë ¤í–ˆë˜ CI/CD ì˜µì…˜ ë¹„êµ

| ì˜µì…˜ | ë³µì¡ë„ | ë¹„ìš© | ë¬´ì¤‘ë‹¨ | í•™ìŠµê³¡ì„  | ë‹¨ì¼ì„œë²„ ì í•©ì„± | ìµœì¢… í‰ê°€ |
|------|--------|------|--------|----------|----------------|-----------|
| **GitHub Actions + Blue-Green** | â­â­ | ë¬´ë£Œ | âœ… | ë‚®ìŒ | âœ… | **â­â­â­â­â­** |
| Kubernetes + ArgoCD | â­â­â­â­â­ | $$$+ | âœ… | ë§¤ìš° ë†’ìŒ | âŒ | â­ |
| Jenkins + Docker Swarm | â­â­â­â­ | $$+ | âœ… | ë†’ìŒ | â­â­ | â­â­ |
| GitLab CI/CD + Ansible | â­â­â­â­ | $$+ | âœ… | ë†’ìŒ | â­â­ | â­â­ |
| CircleCI + Docker Compose | â­â­â­ | $$ | âœ… | ì¤‘ê°„ | â­â­â­ | â­â­â­ |

---

### ìµœì¢… ì„ íƒ: GitHub Actions + Blue-Green ë°°í¬

#### âœ… **ì„ íƒ ì´ìœ  1: ì™„ë²½í•œ ë¹„ìš© íš¨ìœ¨ì„±**

```
GitHub Actions ë¬´ë£Œ ì œê³µ:
- Public Repo: ë¬´ì œí•œ
- Private Repo: 2,000ë¶„/ì›”

ìš°ë¦¬ì˜ ì˜ˆìƒ ì‚¬ìš©ëŸ‰:
- ë°°í¬ 1íšŒ: ì•½ 5ë¶„
- ì›” ë°°í¬ íšŸìˆ˜: ~40íšŒ
- ì›” ì‚¬ìš©ëŸ‰: 200ë¶„ (10% only!)

ì¶”ê°€ ë¹„ìš©: $0 âœ…
```

**ë¹„êµ**: Jenkins ì„œë²„ ($20/ì›”), GitLab Premium ($19/ì›”), CircleCI ($30/ì›”)

---

#### âœ… **ì„ íƒ ì´ìœ  2: ê¸°ì¡´ ì¸í”„ë¼ í™œìš©**

```mermaid
graph LR
    A[ìš°ë¦¬ê°€ ì´ë¯¸ ê°€ì§„ ê²ƒ] --> B[Docker Compose âœ…]
    A --> C[Nginx âœ…]
    A --> D[ë‹¨ì¼ ì„œë²„ âœ…]
    
    E[ì¶”ê°€ë¡œ í•„ìš”í•œ ê²ƒ] --> F[GitHub Actions Workflow]
    E --> G[ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ deploy.sh]
    E --> H[Blue/Green Compose íŒŒì¼]
    
    style A fill:#90EE90
    style E fill:#FFB6C1
```

**ìš°ë¦¬ëŠ” ì´ë¯¸ 90%ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤!**

---

#### âœ… **ì„ íƒ ì´ìœ  3: KubernetesëŠ” ì˜¤ë²„í‚¬**

**Kubernetesê°€ í•„ìš”í•œ ê²½ìš°**:
- âŒ ìˆ˜ë°± ê°œì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤
- âŒ ë‹¤ì¤‘ ì„œë²„ í´ëŸ¬ìŠ¤í„°
- âŒ ìë™ ìŠ¤ì¼€ì¼ë§ (ì˜¤í† ìŠ¤ì¼€ì¼)
- âŒ ë³µì¡í•œ ë„¤íŠ¸ì›Œí¬ ì •ì±…

**ìš°ë¦¬ì˜ ì‹¤ì œ ìƒí™©**:
- âœ… ë‹¨ì¼ ëª¨ë†€ë¦¬ì‹ ì• í”Œë¦¬ì¼€ì´ì…˜
- âœ… ë‹¨ì¼ ì„œë²„
- âœ… ê³ ì •ëœ ì‚¬ìš©ì ìˆ˜ (< 1,000ëª…)
- âœ… ê°„ë‹¨í•œ ë„¤íŠ¸ì›Œí¬

**ê²°ë¡ **: KubernetesëŠ” **ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í°** ìƒí™©!

---

#### âœ… **ì„ íƒ ì´ìœ  4: ë‚®ì€ í•™ìŠµ ê³¡ì„ **

```
íŒ€ì› A: "Docker ComposeëŠ” ì´ë¯¸ ì•Œì•„ìš”!"
íŒ€ì› B: "Bash ìŠ¤í¬ë¦½íŠ¸ë„ ê´œì°®ì•„ìš”!"
íŒ€ì› C: "Kubernetes... ê·¸ê²Œ ë­ì£ ? ğŸ˜°"

â†’ íŒ€ ì „ì²´ê°€ ì‰½ê²Œ ì´í•´í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥!
```

**í•™ìŠµ ì‹œê°„ ë¹„êµ**:
- GitHub Actions + Blue-Green: 1ì¼
- Kubernetes + Helm: 1~2ì£¼
- Jenkins + Ansible: 3~5ì¼

---

#### âœ… **ì„ íƒ ì´ìœ  5: ê°„ë‹¨í•œ ë¡¤ë°±**

**Kubernetes ë¡¤ë°±**:
```bash
kubectl rollout undo deployment/cabinet-backend
# ë¡¤ë°± ì‹œê°„: 1~2ë¶„
# í•„ìš” ì§€ì‹: K8s Deployment, ReplicaSet ì´í•´
```

**ìš°ë¦¬ì˜ Blue-Green ë¡¤ë°±**:
```bash
sed -i 's/green/blue/g' nginx/conf.d/upstream.conf
docker exec cabi_nginx nginx -s reload
# ë¡¤ë°± ì‹œê°„: 10ì´ˆ âœ…
# í•„ìš” ì§€ì‹: sed, nginx reload (ëˆ„êµ¬ë‚˜ ê°€ëŠ¥!)
```

---

### ì™œ Ansibleì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ê°€?

#### **Ansibleì˜ ì¥ì **
- âœ… ì—¬ëŸ¬ ì„œë²„ ë™ì‹œ ë°°í¬
- âœ… ì„œë²„ ì„¤ì • ìë™í™”
- âœ… ë©±ë“±ì„± ë³´ì¥

#### **ìš°ë¦¬ê°€ Ansibleì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì´ìœ **

**1. ë‹¨ì¼ ì„œë²„ë§Œ ì¡´ì¬**
```
Ansibleì´ ë¹›ì„ ë°œí•˜ëŠ” ê²½ìš°:
ì„œë²„ 10ëŒ€ ì´ìƒì— ë™ì‹œ ë°°í¬

ìš°ë¦¬ì˜ ìƒí™©:
ì„œë²„ 1ëŒ€ (Ansible ì‚¬ìš© ì´ìœ  ì—†ìŒ)
```

**2. ë³µì¡ë„ ì¦ê°€**
```yaml
# Ansible Playbook (ë³µì¡)
- hosts: cabinet_servers
  become: yes
  tasks:
    - name: Pull Docker image
      docker_image:
        name: cabinet:latest
        source: pull
    - name: Stop old container
      docker_container:
        name: cabinet-old
        state: stopped
    # ... ë” ë§ì€ ì„¤ì • ...

# ìš°ë¦¬ì˜ Bash ìŠ¤í¬ë¦½íŠ¸ (ê°„ë‹¨)
docker-compose -f docker-compose.green.yml up -d
```

**3. í•™ìŠµ ë¹„ìš©**
- Ansible YAML ë¬¸ë²• í•™ìŠµ
- Playbook ì‘ì„± ë°©ë²•
- Inventory ê´€ë¦¬
- Vault (ë¹„ë°€ ê´€ë¦¬)

â†’ **Bash ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤!**

---

### ë‹¤ë¥¸ ë°©ì‹ê³¼ì˜ ìƒì„¸ ë¹„êµ

#### **1. Jenkins vs GitHub Actions**

| í•­ëª© | Jenkins | GitHub Actions |
|------|---------|----------------|
| **ì„¤ì¹˜** | ë³„ë„ ì„œë²„ í•„ìš” | í´ë¼ìš°ë“œ (ë¬´ë£Œ) |
| **ìœ ì§€ë³´ìˆ˜** | í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ í•„ìš” | GitHubê°€ ê´€ë¦¬ |
| **ë¹„ìš©** | ì„œë²„ ë¹„ìš© ($20/ì›”) | ë¬´ë£Œ |
| **ì„¤ì •** | Jenkinsfile + í”ŒëŸ¬ê·¸ì¸ | YAML íŒŒì¼ 1ê°œ |
| **ì†ë„** | ì„œë²„ ì„±ëŠ¥ ì˜ì¡´ | ë¹ ë¦„ (GitHub ì¸í”„ë¼) |

**ê²°ë¡ **: JenkinsëŠ” **ëŒ€ê·œëª¨ ì—”í„°í”„ë¼ì´ì¦ˆ**ì— ì í•©

---

#### **2. Kubernetes vs Docker Compose**

| í•­ëª© | Kubernetes | Docker Compose |
|------|------------|----------------|
| **ì ìš© ëŒ€ìƒ** | ìˆ˜ë°± ê°œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ | ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ |
| **ì„œë²„ ìˆ˜** | ìµœì†Œ 3ëŒ€ (Master + Worker) | 1ëŒ€ âœ… |
| **í•™ìŠµ ê³¡ì„ ** | â­â­â­â­â­ (ë§¤ìš° ë†’ìŒ) | â­â­ (ë‚®ìŒ) âœ… |
| **ì„¤ì • íŒŒì¼** | Deployment, Service, Ingress, ConfigMap... | docker-compose.yml 1ê°œ âœ… |
| **ì˜¤í† ìŠ¤ì¼€ì¼** | ê°€ëŠ¥ | ë¶ˆí•„ìš” (ê³ ì • ì‚¬ìš©ì) |
| **ë¬´ì¤‘ë‹¨ ë°°í¬** | Rolling Update | Blue-Green âœ… |

**ê²°ë¡ **: KubernetesëŠ” **ìš°ë¦¬ í”„ë¡œì íŠ¸ì— ì˜¤ë²„ìŠ¤í™**

---

#### **3. GitLab CI/CD vs GitHub Actions**

| í•­ëª© | GitLab CI/CD | GitHub Actions |
|------|--------------|----------------|
| **ê°€ê²©** | Self-hosted ë˜ëŠ” $19/ì›” | ë¬´ë£Œ âœ… |
| **í†µí•©** | GitLab ì €ì¥ì†Œ í•„ìš” | GitHub ë„¤ì´í‹°ë¸Œ âœ… |
| **Runner** | ë³„ë„ ì„¤ì • í•„ìš” | ìë™ ì œê³µ âœ… |
| **ìƒíƒœê³„** | ì œí•œì  | ë°©ëŒ€í•œ Marketplace âœ… |

**ê²°ë¡ **: ìš°ë¦¬ëŠ” **ì´ë¯¸ GitHub ì‚¬ìš© ì¤‘** â†’ GitHub Actionsê°€ ìì—°ìŠ¤ëŸ¬ì›€

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub (í´ë¼ìš°ë“œ)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ì½”ë“œ Push (main ë¸Œëœì¹˜)                                â”‚
â”‚       â†“                                                     â”‚
â”‚  2. GitHub Actions íŠ¸ë¦¬ê±°                                   â”‚
â”‚       â†“                                                     â”‚
â”‚  3. Build & Test (Gradle)                                   â”‚
â”‚       â†“                                                     â”‚
â”‚  4. Docker ì´ë¯¸ì§€ ë¹Œë“œ                                      â”‚
â”‚       â†“                                                     â”‚
â”‚  5. GitHub Container Registryì— í‘¸ì‹œ                        â”‚
â”‚       â†“                                                     â”‚
â”‚  6. SSHë¡œ ì„œë²„ ì ‘ì†                                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ SSH (í¬íŠ¸ 22)
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  í”„ë¡œë•ì…˜ ì„œë²„ (ë‹¨ì¼ ì„œë²„)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  7. deploy.sh ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰                                 â”‚
â”‚       â†“                                                     â”‚
â”‚  8. í˜„ì¬ í™œì„± ì»¨í…Œì´ë„ˆ í™•ì¸ (Blue/Green)                    â”‚
â”‚       â†“                                                     â”‚
â”‚  9. ë°˜ëŒ€ ìƒ‰ìƒì˜ ìƒˆ ì»¨í…Œì´ë„ˆ ì‹œì‘                            â”‚
â”‚       â†“                                                     â”‚
â”‚  10. í—¬ìŠ¤ì²´í¬ (30ì´ˆ ëŒ€ê¸°)                                   â”‚
â”‚       â†“                                                     â”‚
â”‚  11. Nginx íŠ¸ë˜í”½ ì „í™˜ (0.1ì´ˆ)                              â”‚
â”‚       â†“                                                     â”‚
â”‚  12. ì´ì „ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ                                     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Nginx (Port 80)                    â”‚ â”‚
â”‚  â”‚                 Reverse Proxy & Router                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                                     â”‚
â”‚                      â”‚ (upstream backend_active)           â”‚
â”‚                      â”‚                                     â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚          â†“                       â†“                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   Blue       â”‚        â”‚   Green      â”‚                 â”‚
â”‚  â”‚   (v1.0)     â”‚  ë˜ëŠ”  â”‚   (v2.0)     â”‚                 â”‚
â”‚  â”‚   :8080      â”‚        â”‚   :8080      â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                       â”‚                          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                     â†“                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚         â”‚   MariaDB + Redis     â”‚                          â”‚
â”‚         â”‚   (ê³µìœ  ë°ì´í„°ë² ì´ìŠ¤)  â”‚                          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”µğŸŸ¢ Blue-Green ë°°í¬ ì›ë¦¬

### í•µì‹¬ ì»¨ì…‰

**"ë‘ ê°œì˜ ë™ì¼í•œ í™˜ê²½ì„ ìœ ì§€í•˜ê³ , íŠ¸ë˜í”½ì„ ìˆœì‹ê°„ì— ì „í™˜í•œë‹¤"**

```
Blue  (í˜„ì¬ ì„œë¹„ìŠ¤ ì¤‘) â”€â”
                       â”œâ”€â†’ Nginx â”€â†’ ì‚¬ìš©ì
Green (ëŒ€ê¸° ì¤‘)       â”€â”˜
```

---

### ìƒì„¸ íë¦„ë„

#### **1. ì´ˆê¸° ìƒíƒœ: Blue ì„œë¹„ìŠ¤ ì¤‘**

```
ì‚¬ìš©ì ìš”ì²­ (100%)
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Nginx  â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â†’ Blue:8080  âœ… (v1.0 ì„œë¹„ìŠ¤ ì¤‘)
            Green: (ì—†ìŒ)
```

---

#### **2. ë°°í¬ ì‹œì‘: Green ì»¨í…Œì´ë„ˆ ì‹œì‘**

```bash
# ëª…ë ¹ì–´
docker-compose -f docker-compose.green.yml up -d
```

```
ì‚¬ìš©ì ìš”ì²­ (100%)
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Nginx  â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ Blue:8080  âœ… (v1.0 ê³„ì† ì„œë¹„ìŠ¤!)
        â”‚
        â””â”€â†’ Green:8080 ğŸŸ¢ (v2.0 ì¤€ë¹„ ì¤‘, ì‚¬ìš©ì ìš”ì²­ ì—†ìŒ)
```

**ğŸ’¡ í•µì‹¬**: BlueëŠ” **ì—¬ì „íˆ ì„œë¹„ìŠ¤ ì¤‘**ì´ë¯€ë¡œ **ì‚¬ìš©ìëŠ” ì „í˜€ ëª¨ë¦„!**

---

#### **3. í—¬ìŠ¤ì²´í¬: Green ì •ìƒ í™•ì¸ (30ì´ˆ)**

```bash
# í—¬ìŠ¤ì²´í¬
curl http://cabi_backend_green:8080/actuator/health

# ì‘ë‹µ
{
  "status": "UP",
  "components": {
    "db": {"status": "UP"},
    "diskSpace": {"status": "UP"}
  }
}
```

**ì²´í¬ ì‚¬í•­**:
- âœ… Spring Boot ì •ìƒ ì‹œì‘
- âœ… MariaDB ì—°ê²° ì„±ê³µ
- âœ… Redis ì—°ê²° ì„±ê³µ
- âœ… ë©”ëª¨ë¦¬ ì •ìƒ

---

#### **4. Nginx ì „í™˜: Blue â†’ Green (0.1ì´ˆ)**

**Nginx ì„¤ì • íŒŒì¼ ë³€ê²½**:
```nginx
# ë³€ê²½ ì „ (nginx/conf.d/upstream.conf)
upstream backend_active {
    server cabi_backend_blue:8080;  # â† Blue
}

# ë³€ê²½ í›„
upstream backend_active {
    server cabi_backend_green:8080;  # â† Green
}
```

```bash
# Nginx ë¦¬ë¡œë“œ (ë¬´ì¤‘ë‹¨)
docker exec cabi_nginx nginx -s reload
```

```
ì‚¬ìš©ì ìš”ì²­ (100%)
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Nginx  â”‚ â† ì„¤ì • ë¦¬ë¡œë“œ (0.1ì´ˆ)
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ Blue:8080  (ì—°ê²° ì¢…ë£Œ ì¤‘...)
        â”‚
        â””â”€â†’ Green:8080 âœ… (ìƒˆ ìš”ì²­ ëª¨ë‘ Greenìœ¼ë¡œ!)
```

**ğŸ’¡ í•µì‹¬**: Nginx ë¦¬ë¡œë“œëŠ” **ë¬´ì¤‘ë‹¨**ì´ë©°, ê¸°ì¡´ ì—°ê²°ì€ ìœ ì§€í•˜ë©´ì„œ ìƒˆ ì—°ê²°ë§Œ Greenìœ¼ë¡œ!

---

#### **5. Blue ì¢…ë£Œ: ì´ì „ ë²„ì „ ì œê±°**

```bash
# Blue ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
docker-compose -f docker-compose.blue.yml down
```

```
ì‚¬ìš©ì ìš”ì²­ (100%)
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Nginx  â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â†’ Green:8080 âœ… (v2.0 ì•ˆì •ì  ì„œë¹„ìŠ¤!)
            Blue: (ì¢…ë£Œë¨)
```

**âœ… ë°°í¬ ì™„ë£Œ!**

---

### íƒ€ì„ë¼ì¸ (ì‹¤ì œ ì‹œê°„ íë¦„)

```
ì‹œê°„    ì´ë²¤íŠ¸                        ì‚¬ìš©ì ê²½í—˜        ì„œë²„ ìƒíƒœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
00:00   git push main                ì •ìƒ ì„œë¹„ìŠ¤       Blue ì‹¤í–‰ ì¤‘
00:30   GitHub Actions ì‹œì‘          ì •ìƒ ì„œë¹„ìŠ¤       Blue ì‹¤í–‰ ì¤‘
03:00   Gradle ë¹Œë“œ ì™„ë£Œ             ì •ìƒ ì„œë¹„ìŠ¤       Blue ì‹¤í–‰ ì¤‘
04:00   Docker ì´ë¯¸ì§€ í‘¸ì‹œ ì™„ë£Œ      ì •ìƒ ì„œë¹„ìŠ¤       Blue ì‹¤í–‰ ì¤‘
04:30   SSH ì„œë²„ ì ‘ì†                ì •ìƒ ì„œë¹„ìŠ¤       Blue ì‹¤í–‰ ì¤‘
05:00   Green ì»¨í…Œì´ë„ˆ ì‹œì‘          ì •ìƒ ì„œë¹„ìŠ¤       Blue + Green
05:30   Green í—¬ìŠ¤ì²´í¬ ëŒ€ê¸° (30ì´ˆ)   ì •ìƒ ì„œë¹„ìŠ¤       Blue + Green
06:00   Nginx ì„¤ì • ë³€ê²½ (0.1ì´ˆ)      ì •ìƒ ì„œë¹„ìŠ¤ â†’     Blue + Green
06:00   íŠ¸ë˜í”½ ì „í™˜ ì™„ë£Œ             ì •ìƒ ì„œë¹„ìŠ¤ âœ…    Blue + Green
06:30   Blue ì»¨í…Œì´ë„ˆ ì¢…ë£Œ           ì •ìƒ ì„œë¹„ìŠ¤       Green only
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì´ ë°°í¬ ì‹œê°„: 6ë¶„ 30ì´ˆ
ì‚¬ìš©ì ë‹¤ìš´íƒ€ì„: 0ì´ˆ âœ…
```

---

### ë¡¤ë°± ì‹œë‚˜ë¦¬ì˜¤

#### **ìƒí™©: Greenì— ë²„ê·¸ ë°œê²¬!**

```
í˜„ì¬: ì‚¬ìš©ì â†’ Nginx â†’ Green:8080 âŒ (ë²„ê·¸ ë°œìƒ!)
```

#### **ë¡¤ë°± ë°©ë²• 1: Nginxë§Œ ì¬ì „í™˜ (10ì´ˆ)**

```bash
# 1. upstream.conf ë˜ëŒë¦¬ê¸°
sed -i 's/cabi_backend_green/cabi_backend_blue/g' nginx/conf.d/upstream.conf

# 2. Nginx ë¦¬ë¡œë“œ
docker exec cabi_nginx nginx -s reload
```

```
ì‚¬ìš©ì â†’ Nginx â†’ Blue:8080 âœ… (ì´ì „ ë²„ì „ìœ¼ë¡œ ë³µêµ¬!)
```

**âš¡ ë¡¤ë°± ì™„ë£Œ: 10ì´ˆ**

---

#### **ë¡¤ë°± ë°©ë²• 2: Blue ì¬ì‹œì‘ (30ì´ˆ)**

Blueê°€ ì´ë¯¸ ì¢…ë£Œëœ ê²½ìš°:

```bash
# 1. Blue ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose -f docker-compose.blue.yml up -d

# 2. í—¬ìŠ¤ì²´í¬ ëŒ€ê¸° (10ì´ˆ)
sleep 10

# 3. Nginx ì „í™˜
sed -i 's/cabi_backend_green/cabi_backend_blue/g' nginx/conf.d/upstream.conf
docker exec cabi_nginx nginx -s reload

# 4. Green ì¢…ë£Œ
docker-compose -f docker-compose.green.yml down
```

**âš¡ ë¡¤ë°± ì™„ë£Œ: 30ì´ˆ**

---

## ğŸ› ï¸ êµ¬í˜„ ìƒì„¸

### íŒŒì¼ êµ¬ì¡°

```
ft_cabinet_BE/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy.yml              # GitHub Actions Workflow
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ deploy.sh                   # Blue-Green ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ conf.d/
â”‚       â”œâ”€â”€ default.conf            # Nginx ë©”ì¸ ì„¤ì •
â”‚       â””â”€â”€ upstream.conf           # Upstream Blue/Green ì„¤ì •
â”œâ”€â”€ docker-compose.yml              # ê¸°ë³¸ ì¸í”„ë¼ (DB, Redis, Nginx...)
â”œâ”€â”€ docker-compose.blue.yml         # Blue ë°±ì—”ë“œ
â”œâ”€â”€ docker-compose.green.yml        # Green ë°±ì—”ë“œ
â””â”€â”€ GITHUB_SECRETS_GUIDE.md         # Secret ì„¤ì • ê°€ì´ë“œ
```

---

### ì£¼ìš” ì„¤ì • íŒŒì¼ ì„¤ëª…

#### **1. `.github/workflows/deploy.yml`**

**ì—­í• **: GitHub Actions CI/CD íŒŒì´í”„ë¼ì¸

**ì£¼ìš” ë‹¨ê³„**:
1. ì½”ë“œ ì²´í¬ì•„ì›ƒ
2. Java 17 ì„¤ì •
3. Gradle ë¹Œë“œ
4. Docker ì´ë¯¸ì§€ ë¹Œë“œ & í‘¸ì‹œ
5. SSHë¡œ ì„œë²„ ì ‘ì† ë° ë°°í¬
6. Slack ì•Œë¦¼

**íŠ¸ë¦¬ê±° ì¡°ê±´**:
```yaml
on:
  push:
    branches: [ main ]  # main ë¸Œëœì¹˜ì— push ì‹œ ìë™ ì‹¤í–‰
  workflow_dispatch:    # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
```

---

#### **2. `scripts/deploy.sh`**

**ì—­í• **: Blue-Green ë°°í¬ ë¡œì§ ì‹¤í–‰

**ì£¼ìš” ê¸°ëŠ¥**:
```bash
1. í˜„ì¬ í™œì„± ì»¨í…Œì´ë„ˆ í™•ì¸ (Blue/Green)
2. ë°˜ëŒ€ ìƒ‰ìƒì˜ ìƒˆ ì»¨í…Œì´ë„ˆ ì‹œì‘
3. 30ì´ˆ í—¬ìŠ¤ì²´í¬ ëŒ€ê¸°
4. Nginx upstream ì„¤ì • ë³€ê²½
5. Nginx ë¦¬ë¡œë“œ
6. ì´ì „ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
```

**ì•ˆì „ ì¥ì¹˜**:
- `set -e`: ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨
- í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ê°€ëŠ¥
- ìƒì„¸í•œ ë¡œê·¸ ì¶œë ¥ (ë””ë²„ê¹… ìš©ì´)

---

#### **3. `nginx/conf.d/upstream.conf`**

**ì—­í• **: Blue/Green Upstream ì •ì˜

```nginx
upstream backend_blue {
    server cabi_backend_blue:8080;
    keepalive 32;
}

upstream backend_green {
    server cabi_backend_green:8080;
    keepalive 32;
}

# í˜„ì¬ í™œì„± (ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ê°€ ë™ì ìœ¼ë¡œ ë³€ê²½)
upstream backend_active {
    server cabi_backend_blue:8080;  # ë˜ëŠ” green
    keepalive 32;
}
```

---

#### **4. `docker-compose.blue.yml` & `docker-compose.green.yml`**

**ì°¨ì´ì **: ì»¨í…Œì´ë„ˆ ì´ë¦„ë§Œ ë‹¤ë¦„
- Blue: `cabi_backend_blue`
- Green: `cabi_backend_green`

**ê³µí†µì **:
- ë™ì¼í•œ í™˜ê²½ ë³€ìˆ˜
- ë™ì¼í•œ ë„¤íŠ¸ì›Œí¬ (`ft_cabinet_be_default`)
- ë™ì¼í•œ í¬íŠ¸ (`8080`)

---

## ğŸ“– ì‚¬ìš© ê°€ì´ë“œ

### ì´ˆê¸° ì„¤ì •

#### **1. GitHub Secrets ë“±ë¡**

`GITHUB_SECRETS_GUIDE.md` ì°¸ê³ í•˜ì—¬ ë‹¤ìŒ Secret ë“±ë¡:

**í•„ìˆ˜**:
- `SERVER_HOST`: ì„œë²„ IP ë˜ëŠ” ë„ë©”ì¸
- `SERVER_USER`: SSH ì‚¬ìš©ìëª…
- `SSH_PRIVATE_KEY`: SSH ê°œì¸í‚¤

**ê¶Œì¥**:
- `DEPLOY_PATH`: í”„ë¡œì íŠ¸ ê²½ë¡œ (ê¸°ë³¸: `/home/user/42_Cabinet/ft_cabinet_BE`)
- `SLACK_WEBHOOK_URL`: Slack ì•Œë¦¼ URL

---

#### **2. ì„œë²„ í™˜ê²½ ì¤€ë¹„**

```bash
# 1. SSH í‚¤ ì„¤ì •
ssh-keygen -t rsa -b 4096 -C "github-actions@cabinet"
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys

# 2. Docker ê¶Œí•œ ë¶€ì—¬
sudo usermod -aG docker $USER

# 3. í”„ë¡œì íŠ¸ í´ë¡ 
cd /home/user
git clone https://github.com/42-Gy/ft_cabinet_BE.git
cd ft_cabinet_BE

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
vi .env  # í™˜ê²½ ë³€ìˆ˜ ì…ë ¥

# 5. ê¸°ë³¸ ì¸í”„ë¼ ì‹œì‘
docker-compose up -d  # MariaDB, Redis, Nginx, Prometheus, Grafana
```

---

#### **3. ìµœì´ˆ ë°°í¬ (ìˆ˜ë™)**

```bash
# Blue ì»¨í…Œì´ë„ˆ ì‹œì‘
docker-compose -f docker-compose.blue.yml up -d

# í™•ì¸
docker ps
curl http://localhost/actuator/health
```

---

### ìë™ ë°°í¬ (CI/CD)

#### **ë°°í¬ íŠ¸ë¦¬ê±°**

```bash
# ì½”ë“œ ìˆ˜ì • í›„
git add .
git commit -m "feat: ì‚¬ë¬¼í•¨ ëŒ€ì—¬ ë¡œì§ ê°œì„ "
git push origin main  # â† ì´ ìˆœê°„ ìë™ ë°°í¬ ì‹œì‘!
```

---

#### **ë°°í¬ ì§„í–‰ ìƒí™© í™•ì¸**

1. **GitHub Actions í˜ì´ì§€**:
   ```
   Repository â†’ Actions â†’ ìµœì‹  Workflow í´ë¦­
   ```

2. **ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸**:
   - Build & Test
   - Docker Image Build
   - Deploy to Server

3. **Slack ì•Œë¦¼ (ì„¤ì • ì‹œ)**:
   ```
   âœ… Cabinet Backend ë°°í¬ ì„±ê³µ!
   Commit: abc123
   Author: ahnhyunjun
   ```

---

#### **ë°°í¬ ì‹¤íŒ¨ ì‹œ**

1. **GitHub Actions ë¡œê·¸ í™•ì¸**
   ```
   ì–´ëŠ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨í–ˆëŠ”ì§€ í™•ì¸
   ```

2. **ì„œë²„ ë¡œê·¸ í™•ì¸**
   ```bash
   ssh user@server
   cd /home/user/42_Cabinet/ft_cabinet_BE
   docker logs cabi_backend_green --tail 100
   ```

3. **ë¡¤ë°± (í•„ìš”ì‹œ)**
   ```bash
   ./scripts/deploy.sh  # ìë™ìœ¼ë¡œ Blueë¡œ ë¡¤ë°±
   ```

---

### ìˆ˜ë™ ë°°í¬

GitHub Actions ì—†ì´ ì§ì ‘ ë°°í¬:

```bash
# ì„œë²„ ì ‘ì†
ssh user@server

# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬
cd /home/user/42_Cabinet/ft_cabinet_BE

# ìµœì‹  ì½”ë“œ pull
git pull origin main

# Gradle ë¹Œë“œ
./gradlew clean build -x test

# Blue-Green ë°°í¬
./scripts/deploy.sh
```

---

### ëª¨ë‹ˆí„°ë§

#### **1. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸**
```bash
docker ps --filter "name=cabi_backend"
```

#### **2. ë¡œê·¸ í™•ì¸**
```bash
# ì‹¤ì‹œê°„ ë¡œê·¸
docker logs -f cabi_backend_green

# ìµœê·¼ 100ì¤„
docker logs cabi_backend_green --tail 100
```

#### **3. Grafana ëŒ€ì‹œë³´ë“œ**
```
http://your-server:3000
- HTTP ìš”ì²­ ì‘ë‹µ ì‹œê°„
- ì—ëŸ¬ìœ¨
- HikariCP ì»¤ë„¥ì…˜ í’€
```

#### **4. í—¬ìŠ¤ì²´í¬**
```bash
curl http://localhost/actuator/health
```

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ë°°í¬ ì‹œ ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
```
Error: Cannot start service backend-green: ...
```

**ì›ì¸**:
- í¬íŠ¸ ì¶©ëŒ
- í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½
- ë©”ëª¨ë¦¬ ë¶€ì¡±

**í•´ê²°**:
```bash
# 1. í¬íŠ¸ í™•ì¸
docker ps | grep 8080

# 2. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
cat .env

# 3. ë©”ëª¨ë¦¬ í™•ì¸
free -h
docker stats
```

---

### ë¬¸ì œ 2: Nginx ì „í™˜ í›„ 502 Bad Gateway

**ì¦ìƒ**:
```
curl http://localhost
â†’ 502 Bad Gateway
```

**ì›ì¸**:
- ìƒˆ ì»¨í…Œì´ë„ˆê°€ ì•„ì§ ì¤€ë¹„ ì•ˆë¨
- í—¬ìŠ¤ì²´í¬ í†µê³¼ ì „ì— ì „í™˜

**í•´ê²°**:
```bash
# 1. ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸
docker logs cabi_backend_green

# 2. í—¬ìŠ¤ì²´í¬ ìˆ˜ë™ í™•ì¸
curl http://cabi_backend_green:8080/actuator/health

# 3. ë¡¤ë°±
sed -i 's/green/blue/g' nginx/conf.d/upstream.conf
docker exec cabi_nginx nginx -s reload
```

---

### ë¬¸ì œ 3: GitHub Actions SSH ì ‘ì† ì‹¤íŒ¨

**ì¦ìƒ**:
```
Permission denied (publickey)
```

**ì›ì¸**:
- SSH í‚¤ê°€ ì˜ëª» ë“±ë¡ë¨
- ì„œë²„ ì‚¬ìš©ì ê¶Œí•œ ì—†ìŒ

**í•´ê²°**:
```bash
# 1. ë¡œì»¬ì—ì„œ SSH í…ŒìŠ¤íŠ¸
ssh -i ~/.ssh/id_rsa user@server

# 2. authorized_keys í™•ì¸
cat ~/.ssh/authorized_keys

# 3. ê¶Œí•œ í™•ì¸
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
```

---

### ë¬¸ì œ 4: DB ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ**:
```
org.mariadb.jdbc.internal.util.exceptions.MariaDbException: 
Could not connect to address=(host=mariadb)
```

**ì›ì¸**:
- MariaDB ì»¨í…Œì´ë„ˆ ì¤‘ì§€ë¨
- ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ

**í•´ê²°**:
```bash
# 1. MariaDB ìƒíƒœ í™•ì¸
docker ps | grep mariadb

# 2. ì¬ì‹œì‘
docker-compose restart mariadb

# 3. ë„¤íŠ¸ì›Œí¬ í™•ì¸
docker network ls
docker network inspect ft_cabinet_be_default
```

---

### ë¬¸ì œ 5: Blueì™€ Green ëª¨ë‘ ì‹¤í–‰ ì¤‘

**ì¦ìƒ**:
```
docker ps
â†’ cabi_backend_blue   Up
â†’ cabi_backend_green  Up
```

**ì›ì¸**:
- ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ê°€ ì¤‘ê°„ì— ì¤‘ë‹¨ë¨
- ìˆ˜ë™ìœ¼ë¡œ ì¢…ë£Œí•˜ì§€ ì•ŠìŒ

**í•´ê²°**:
```bash
# 1. í˜„ì¬ í™œì„± í™•ì¸ (Nginx ì„¤ì •)
cat nginx/conf.d/upstream.conf | grep backend_active

# 2. ë¹„í™œì„± ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
# ì˜ˆ: Greenì´ í™œì„±í™”ëœ ê²½ìš°
docker-compose -f docker-compose.blue.yml down
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [GitHub Actions ë¬¸ì„œ](https://docs.github.com/en/actions)
- [Docker Compose ê³µì‹ ê°€ì´ë“œ](https://docs.docker.com/compose/)
- [Nginx Reverse Proxy](https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/)

### Blue-Green ë°°í¬
- [Martin Fowler: BlueGreenDeployment](https://martinfowler.com/bliki/BlueGreenDeployment.html)
- [AWS Blue/Green ë°°í¬](https://docs.aws.amazon.com/whitepapers/latest/blue-green-deployments/welcome.html)

### CI/CD ì „ëµ
- [Kubernetes vs Docker Compose](https://www.mirantis.com/blog/kubernetes-vs-docker-compose/)
- [When to use Ansible](https://www.redhat.com/en/topics/automation/learning-ansible-tutorial)

---

## ğŸ“ ë°°ìš´ êµí›ˆ

### âœ… **ì˜í•œ ì **

1. **ë‹¨ìˆœí•¨ ìœ ì§€**
   - ë³µì¡í•œ Kubernetes ëŒ€ì‹  Docker Compose ì„ íƒ
   - ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ 100ì¤„ ë¯¸ë§Œ

2. **ë¹„ìš© ì œë¡œ**
   - GitHub Actions ë¬´ë£Œ í”Œëœ í™œìš©
   - ë³„ë„ CI ì„œë²„ ë¶ˆí•„ìš”

3. **íŒ€ ì¹œí™”ì **
   - Bash ìŠ¤í¬ë¦½íŠ¸ (íŒ€ì› ëª¨ë‘ ì´í•´ ê°€ëŠ¥)
   - ìƒì„¸í•œ ë¡œê·¸ì™€ ì—ëŸ¬ ë©”ì‹œì§€

---

### ğŸ”„ **ê°œì„  ê°€ëŠ¥í•œ ì **

1. **í—¬ìŠ¤ì²´í¬ ê³ ë„í™”**
   - í˜„ì¬: 30ì´ˆ ê³ ì • ëŒ€ê¸°
   - ê°œì„ : ì‹¤ì œ ì‘ë‹µ í™•ì¸ í›„ ì¦‰ì‹œ ì „í™˜

2. **ìë™ ë¡¤ë°±**
   - í˜„ì¬: ìˆ˜ë™ ë¡¤ë°±
   - ê°œì„ : Green ì—ëŸ¬ìœ¨ ë†’ìœ¼ë©´ ìë™ ë¡¤ë°±

3. **ì¹´ë‚˜ë¦¬ ë°°í¬ ì¶”ê°€**
   - í˜„ì¬: 100% íŠ¸ë˜í”½ ì „í™˜
   - ê°œì„ : 10% â†’ 50% â†’ 100% ë‹¨ê³„ì  ì „í™˜

---

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

### DevOps íŒ€
- **ë‹´ë‹¹ì**: @ahnhyunjun
- **GitHub**: https://github.com/42-Gy/ft_cabinet_BE
- **Slack**: #cabinet-devops

### ê¸´ê¸‰ ìƒí™©
1. ì„œë²„ ë‹¤ìš´: ì¦‰ì‹œ Slack DM
2. ë°°í¬ ì‹¤íŒ¨: GitHub Issues ìƒì„±
3. ë³´ì•ˆ ì´ìŠˆ: devops@42cabinet.kr

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-03 22:00 KST  
**ì‘ì„±ì**: DevOps Team  
**ë¦¬ë·°ì–´**: -

